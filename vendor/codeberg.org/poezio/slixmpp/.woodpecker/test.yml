when:
  event: [ push, pull_request ]
  path: [ "**/*.py" ]

steps:
  setup_venv:
    image: codeberg.org/poezio/woodpecker-slixmpp  
    pull: true
    commands:
    - uv python pin ${TAG}
    - uv sync --frozen --all-groups --all-extras
  unit_tests:
    image: codeberg.org/poezio/woodpecker-slixmpp
    commands:
    - ./run_tests.py

matrix:
  TAG:
    - "3.9"
    - "3.10"
    - "3.11"
    - "3.12"
    - "3.13"
